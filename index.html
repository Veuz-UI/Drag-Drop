<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task 2</title>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.3/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">



</head>

<body>

    <div class="container">
        <div class="main_box">
            <div class="grid_row">
                <div class="blank_space">
                    <div class="selected_page">
                        <div id="page">

                            <img src="qr.png" id="qrImage" width="100" height="100" alt="Image">

                            <p id="draggableOne">Text 1</p>

                            <p id="draggableTwo">Text 2</p>

                            <div id="imageWrapper" style="display: none;">
                                <img id="uploadedImage" src="#" alt="Uploaded Image">
                            </div>



                        </div>
                    </div>
                </div>

                <div class="configure_section">

                    <div class="page_select">
                        <div id="content">
                            <label for="pagesize">Select Page Size:</label>
                            <select id="pagesize" class="form-select" onchange="changePageSize()">
                                <option value="a4">A4</option>
                                <option value="a5">A5</option>
                                <option value="custom">Custom</option>
                            </select>
                            <div id="customSizeInputs" style="display:none;">
                                <div class="width_height_flex_row">
                                    <div class="width">
                                        <div class="label_input">
                                            <label for="customWidth">Width:</label>
                                            <input class="form-control" type="number" id="customWidth" min="1">
                                        </div>
                                        <select id="widthUnit" class="form-select">
                                            <option value="mm">mm</option>
                                            <option value="cm">cm</option>
                                            <option value="px">px</option>
                                        </select>
                                    </div>
                                    <div class="height">
                                        <div class="label_input">
                                            <label for="customHeight">Height:</label>
                                            <input class="form-control" type="number" id="customHeight" min="1">
                                        </div>

                                        <select id="heightUnit" class="form-select">
                                            <option value="mm">mm</option>
                                            <option value="cm">cm</option>
                                            <option value="px">px</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>


                    <!-- fontsize increse decrease -->

                    <label for="fontSize">Font Size:</label>
                    <input type="range" id="fontSize" min="12" max="36" value="16">

                    <!-- <div class="font_size">
                        <button id="reduceFontSize"><i class="ri-subtract-line"></i></button>
                        <span>Font Size</span>
                        <button id="increaseFontSize"><i class="ri-add-line"></i></button>
                    </div> -->

                    <div class="font_weight">
                        <button id="reduceFontWeight"><i class="ri-subtract-line"></i></button>
                        <span>Font Weight</span>
                        <button id="increaseFontWeight"><i class="ri-add-line"></i></button>
                    </div>


                    <div class="font_color">
                        <input type="color" id="fontColorPicker">
                        <label for="font-color">Change Color</label>
                    </div>

                    <!-- image upload -->
                    <div id="imageContainer">
                        <input type="file" id="uploadImageInput">
                        <div id="sizeAdjustmentButtons" style="display: none;">
                            <button id="increaseSize"><i class="ri-add-line"></i></button>
                            <label for="imagesize">Change Size</label>
                            <button id="decreaseSize"><i class="ri-subtract-line"></i></button>
                        </div>

                    </div>


                    <!-- margin and padding -->



                    <input type="range" min="0" max="1000" value="10" class="slider" id="marginRange">
                    <br>
                    <br>

                    <input type="range" min="0" max="1000" value="10" class="slider" id="paddingRange">
                    <br>
                    <div style="margin-top: 100px;"></div>

                    <label for="fontSize">Font Size:</label>
                    <input type="range" id="fontSize" min="12" max="500" value="16">

                    <div style="margin-top: 100px;"></div>

                    <div class="qr_code_width_height">
                        <label for="size">QR Code Size:</label>
                        <input type="range" id="size" min="50" max="200" value="100">
                    </div>


                </div>
            </div>
        </div>
    </div>








    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://code.jquery.com/ui/1.13.3/jquery-ui.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $(function () {
            $("#draggableOne").draggable();
            $("#qrImage").draggable();
            $("#draggableTwo").draggable();
            $("#imageWrapper").draggable();
        });



        function changePageSize() {
            var selectBox = document.getElementById("pagesize");
            var selectedValue = selectBox.options[selectBox.selectedIndex].value;
            var page = document.getElementById("page");
            var customSizeInputs = document.getElementById("customSizeInputs");

            if (selectedValue === "a4") {
                page.style.width = "210mm";
                page.style.height = "297mm";
                customSizeInputs.style.display = "none";
            } else if (selectedValue === "a5") {
                page.style.width = "148mm";
                page.style.height = "210mm";
                customSizeInputs.style.display = "none";
            } else if (selectedValue === "custom") {
                customSizeInputs.style.display = "block";
                page.style.width = ""; // Reset custom size
                page.style.height = ""; // Reset custom size
            }
        }

        // Trigger initial page size setting
        changePageSize();

        // Listen for changes in custom width and height inputs
        document.getElementById("customWidth").addEventListener("input", updatePageSize);
        document.getElementById("customHeight").addEventListener("input", updatePageSize);
        document.getElementById("widthUnit").addEventListener("change", updatePageSize);
        document.getElementById("heightUnit").addEventListener("change", updatePageSize);

        function updatePageSize() {
            var width = document.getElementById("customWidth").value;
            var height = document.getElementById("customHeight").value;
            var widthUnit = document.getElementById("widthUnit").value;
            var heightUnit = document.getElementById("heightUnit").value;
            var page = document.getElementById("page");

            // Convert units to mm
            if (widthUnit === "cm") {
                width *= 10; // 1 cm = 10 mm
            } else if (widthUnit === "px") {
                width *= 0.264583; // Approximately 1 px = 0.264583 mm (for standard 96 dpi)
            }

            if (heightUnit === "cm") {
                height *= 10; // 1 cm = 10 mm
            } else if (heightUnit === "px") {
                height *= 0.264583; // Approximately 1 px = 0.264583 mm (for standard 96 dpi)
            }

            page.style.width = width + "mm";
            page.style.height = height + "mm";
        }




        // Reduce font size when button is clicked
        // $("#reduceFontSize").click(function () {
        //     var currentFontSize = parseInt($("#draggableOne").css("font-size"));
        //     var newFontSize = currentFontSize - 1;
        //     $("#draggableOne").css("font-size", newFontSize + "px");
        // });


        document.addEventListener("DOMContentLoaded", function () {
            const page = document.getElementById("page");

            // Function to update font size of selected text
            function updateFontSize() {
                const fontSize = document.getElementById("fontSize").value;
                const selection = window.getSelection();
                if (selection.rangeCount > 0) {
                    const range = selection.getRangeAt(0);
                    const selectedText = range.cloneContents();
                    const span = document.createElement("span");
                    span.style.fontSize = fontSize + "px";
                    span.appendChild(selectedText);
                    range.deleteContents();
                    range.insertNode(span);
                }
            }

            // Event listener for font size slider input
            document.getElementById("fontSize").addEventListener("input", function () {
                updateFontSize();
            });
        });


        // Increase font size when button is clicked
        $("#increaseFontSize").click(function () {
            var currentFontSize = parseInt($("#draggableOne").css("font-size"));
            var newFontSize = currentFontSize + 1;
            $("#draggableOne").css("font-size", newFontSize + "px");
        });


        // Reduce font weight when button is clicked
        $("#reduceFontWeight").click(function () {
            var currentWeight = parseInt($("#draggableOne").css("font-weight"));
            var newWeight = currentWeight - 100;
            if (newWeight >= 100) {
                $("#draggableOne").css("font-weight", newWeight);
            }
        });

        // Increase font weight when button is clicked
        $("#increaseFontWeight").click(function () {
            var currentWeight = parseInt($("#draggableOne").css("font-weight"));
            var newWeight = currentWeight + 100;
            if (newWeight <= 900) {
                $("#draggableOne").css("font-weight", newWeight);
            }
        });



        // Change font color when color picker value changes
        $("#fontColorPicker").change(function () {
            var selectedColor = $(this).val();
            $("#draggableOne").css("color", selectedColor);
        });


        // upload image

        document.getElementById('uploadImageInput').addEventListener('change', function (event) {
            var file = event.target.files[0];
            if (file) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    var img = document.getElementById('uploadedImage');
                    img.src = e.target.result;
                    document.getElementById('sizeAdjustmentButtons').style.display = 'block';
                    document.getElementById('imageWrapper').style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        });

        document.getElementById('increaseSize').addEventListener('click', function () {
            var img = document.getElementById('uploadedImage');
            var currentWidth = img.width;
            var currentHeight = img.height;
            img.width = currentWidth * 1.1; // Increase width by 10%
            img.height = currentHeight * 1.1; // Increase height by 10%
        });

        document.getElementById('decreaseSize').addEventListener('click', function () {
            var img = document.getElementById('uploadedImage');
            var currentWidth = img.width;
            var currentHeight = img.height;
            img.width = currentWidth * 0.9; // Decrease width by 10%
            img.height = currentHeight * 0.9; // Decrease height by 10%
        });



        // margin change 
        function updateMargin() {
            var slider = document.getElementById("marginRange");
            var marginValue = slider.value;
            var content = document.getElementById("draggableOne");
            content.style.margin = marginValue + "px";
            updateProgressBar();
        }



        // Event listener for slider input
        document.getElementById("marginRange").addEventListener("input", function () {
            updateMargin();
        });


        document.addEventListener("DOMContentLoaded", function () {
            const page = document.getElementById("page");

            page.addEventListener("click", function (event) {
                const target = event.target;

                if (target.tagName === "H1" || target.tagName === "P") {
                    // Clear previous selections
                    clearSelections();

                    // Select the clicked text
                    const selection = window.getSelection();
                    const range = document.createRange();
                    range.selectNodeContents(target);
                    selection.removeAllRanges();
                    selection.addRange(range);

                    // Set font size of selected text
                    const fontSizeSlider = document.getElementById("fontSize");
                    fontSizeSlider.value = window.getComputedStyle(target).fontSize.replace("px", "");


                    // Add event listeners for sliders
                    fontSizeSlider.addEventListener("input", function () {
                        target.style.fontSize = this.value + "px";
                    });

                    elementSizeSlider.addEventListener("input", function () {
                        target.style.width = this.value + "px";
                    });
                }
            });

            // Function to clear selections
            function clearSelections() {
                const selection = window.getSelection();
                selection.removeAllRanges();
            }
        });













        // image width and height
        document.addEventListener("DOMContentLoaded", function () {
            const image = document.getElementById("qrImage");

            // Function to update image size
            function updateImageSize() {
                const size = document.getElementById("size").value;
                image.style.width = size + "px";
                image.style.height = "auto";
            }

            // Event listener for size slider input
            document.getElementById("size").addEventListener("input", function () {
                updateImageSize();
            });
        });



















        document.addEventListener("DOMContentLoaded", function () {
            const fontSizeSlider = document.getElementById("fontSize");
            const marginSlider = document.getElementById("marginRange");
            const fontWeightSlider = document.getElementById("fontWeight");
            const paddingSlider = document.getElementById("padding");
            const textElements = document.querySelectorAll("#page h1, #page h3");

            textElements.forEach(function (element) {
                element.addEventListener("click", function (event) {
                    const target = event.target;

                    // Clear previous selections
                    clearSelections();

                    // Select the clicked text
                    const selection = window.getSelection();
                    const range = document.createRange();
                    range.selectNodeContents(target);
                    selection.removeAllRanges();
                    selection.addRange(range);

                    // Set font size of selected text
                    fontSizeSlider.value = parseInt(window.getComputedStyle(target).fontSize);

                    // Set margin of selected text
                    marginSlider.value = parseInt(window.getComputedStyle(target).margin);

                    // Set font weight of selected text
                    fontWeightSlider.value = parseInt(window.getComputedStyle(target).fontWeight);

                    // Set padding of selected text
                    paddingSlider.value = parseInt(window.getComputedStyle(target).padding);


                    // Add event listener for font size slider input
                    fontSizeSlider.addEventListener("input", function () {
                        target.style.fontSize = this.value + "px";
                    });

                    // Add event listener for margin slider input
                    marginSlider.addEventListener("input", function () {
                        target.style.margin = this.value + "px";
                    });

                    // Add event listener for font weight slider input
                    fontWeightSlider.addEventListener("input", function () {
                        target.style.fontWeight = this.value;
                    });

                    // Add event listener for padding slider input
                    paddingSlider.addEventListener("input", function () {
                        target.style.padding = this.value + "px";
                    });

                    // Prevent event propagation to avoid triggering for other text elements
                    event.stopPropagation();
                });
            });

            // Function to clear selections
            function clearSelections() {
                const selection = window.getSelection();
                selection.removeAllRanges();
            }
        });





    </script>

</body>

</html>